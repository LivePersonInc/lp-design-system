import { Canvas, Meta, SourceState } from '@storybook/addon-docs';
import { styled, css } from '@storybook/theming';
import { noCase } from 'change-case';
import { titleCase } from 'title-case';

import '@liveperson-design-system/components/build/button';
import * as typography from '@liveperson-design-system/tokens/build/js/typography';

import TypographyPreview from '../components/TypographyPreview.mdx';
import VariablesList from '../components/VariablesList.mdx';

export const commonPStyles = ({ theme }) => css`
  font-size: ${`${theme.typography.size.s2}px`};
  margin: 0;
`;

<Meta title="Tokens/Typography" />

export const VarValue = styled.span`
  white-space: pre;
`

# Typography

The typography section is used to describe regular typography over all LP projects.
It consists of headers, body, input, buttons lables, tag and code.

This table of styles made as presets with combinations of tokens.
If there a need to add more styles, please refer to [LPDS Governance Process](https://docs.google.com/document/d/1Iua6CuGrJFAdMRX0MVmMx6_TNPpYppKBYDmKw3Cr_WQ/edit#heading=h.4rya4in1uke4)

Base font size 1em (14px).

1. [Fonts](#fonts)
1. [Sizes](#sizes)
1. [Line heights](#line-heights)
1. [Weights](#weights)
1. [Letter spacings](#letter-spacings)
1. [Heading](#heading)
1. [Display](#display)
1. [Modifications](#modifications)
1. [Body](#body)
1. [Button](#button)
1. [Tag](#tag)
1. [Table](#table)
1. [Input](#input)
1. [Code](#code)
1. [Charts](#charts)

## Fonts

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={Object.keys(typography.variables.fonts).map(name => ({
      name: titleCase(noCase(name)),
      example: styled.p`
        ${typography.mixins.fontFamily(name)};
        font-size: ${({ theme }) => `${theme.typography.size.m2}px`};
        margin: 0;
      `,
    }))}
  />
</Canvas>

<VariablesList
  variables={typography.variables.fonts}
  prefixes={['$font-', 'fonts.', '--lpds-typography-font-']}
/>

### Mixins

- `font-family($font: roboto)` - to apply `font-family` style
- `with-font-family($font: roboto)` - to apply `font-family` style with font rendering optimizations

`$font` can be either one of the provided fonts or just a `font-family` value

## Sizes

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={Object.keys(typography.variables.sizes).map(name => ({
      name: `${titleCase(name)} (${typography.variables.sizes[name]})`,
      example: styled.p`
        font-size: ${typography.variables.sizes[name]};
        margin: 0;
      `,
    }))}
  />
</Canvas>

<VariablesList
  variables={typography.variables.sizes}
  prefixes={['$size-', 'sizes.', '--lpds-typography-size-']}
/>

## Line heights

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={Object.keys(typography.variables.lineHeights).map(name => ({
      name: `${titleCase(name)} (${typography.variables.lineHeights[name]})`,
      example: styled.p`
        ${commonPStyles};
        line-height: ${typography.variables.lineHeights[name]};
        background-color: rgba(0, 0, 0, .1);
      `,
    }))}
  />
</Canvas>

<VariablesList
  variables={typography.variables.lineHeights}
  prefixes={['$line-height-', 'lineHeights.', '--lpds-typography-line-height-']}
/>

## Weights

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={Object.keys(typography.variables.weights).map(name => ({
      name: `${titleCase(name)} (${typography.variables.weights[name]})`,
      example: styled.p`
        ${commonPStyles};
        font-weight: ${typography.variables.weights[name]};
      `,
    }))}
  />
</Canvas>

<VariablesList
  variables={typography.variables.weights}
  prefixes={['$weight-', 'weights.', '--lpds-typography-weight-']}
/>

## Letter spacings

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={Object.keys(typography.variables.letterSpacings).map(name => ({
      name: `${titleCase(name)} (${typography.variables.letterSpacings[name]})`,
      example: styled.p`
        ${commonPStyles};
        letter-spacing: ${typography.variables.letterSpacings[name]};
      `,
    }))}
  />
</Canvas>

<VariablesList
  variables={typography.variables.letterSpacings}
  prefixes={['$letter-spacing-', 'letterSpacings.', '--lpds-typography-letter-spacing-']}
/>

## Heading

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={Object.keys(typography.variables.heading).map(name => ({
      name: `H${name}`,
      example: styled[`h${name}`]`
        ${typography.mixins.header(name)};
        margin: 0;
      `,
    }))}
  />
</Canvas>

<VariablesList
  variables={typography.variables.heading}
  prefixes={['$font-size-heading-', 'heading.', '--lpds-typography-heading-']}
/>

### Mixins

- `header($header: 1)` - to apply styles for headers
  - `$header` - can be one of the provided headers, form 1 to 6

## Display

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={Object.keys(typography.variables.display).map(name => ({
      name: `D${name}`,
      example: styled.div`${typography.mixins.display(name)}`,
    }))}
  />
</Canvas>

<VariablesList
  variables={typography.variables.display}
  prefixes={['$font-size-display-', 'display.', '--lpds-typography-display-']}
/>

### Mixins

- `display($size: 1)` - to apply styles for display texts
  - `$size` - can be one of the provided display texts, form 1 to 6

## Modifications

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={['AllCaps', 'LinkActive', 'InlineEmphasis', 'Code', 'Condensed'].map(name => ({
      name: titleCase(name),
      example: styled.p`
        ${commonPStyles};
        ${typography.mixins[`type${name}`]()};
      `,
    }))}
  />
</Canvas>

### Mixins

- `type-all-caps` - uppercase text
- `type-link-active` - link text
- `type-inline-emphasis` - emphasis text
- `type-code` - code embed text
- `type-condensed` - for text with Roboto Condensed font

## Body

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={[
      ...['body', 'bodyBold', 'bodyItalic'].map(name => ({
        name: titleCase(name),
        example: styled.p`
          ${commonPStyles};
          ${typography.mixins[name]()};
        `,
      })),
      ...['body', 'bodyBold', 'bodyItalic'].map(name => ({
        name: titleCase(`${name}Small`),
        example: styled.p`
          ${commonPStyles};
          ${typography.mixins[name](true)};
        `,
      })),
    ]}
  />
</Canvas>

### Mixins

- `body($small: false)`
- `body-bold($small: false)`
- `body-italic($small: false)`

`$small` - to switch between font sizes, `$size-small` or `$size-body`

## Button

export const button = props => <lp-button {...props} />;

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={['small', 'medium', 'large'].map(name => ({
      name: titleCase(name),
      example: button,
      exampleProps: { theme: 'light', label: name, size: name },
      exampleChildren: null,
    }))}
  />
</Canvas>

### Mixins

- `button($size: medium)`
  - `$size` - can be `small`, `medium` or `large`. It has influence on `font-size` and `font-weight`

## Tag

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={['tag'].map(name => ({
      name: titleCase(name),
      example: styled.p`
        ${commonPStyles};
        ${typography.mixins[name]()};
      `,
    }))}
  />
</Canvas>

### Mixins

- `tag`

## Table

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={['Header', 'Cell'].map(name => ({
      name,
      example: styled.p`
        ${commonPStyles};
        ${typography.mixins[`table${name}`]()};
      `,
    }))}
  />
</Canvas>

### Mixins

- `table-header` - header cells
- `table-cell` - body cells

## Input

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={['Label', 'Value'].map(name => ({
      name,
      example: styled.p`
        ${commonPStyles};
        ${typography.mixins[`input${name}`]()};
      `,
    }))}
  />
</Canvas>

### Mixins

- `input-label` - label
- `input-value` - value

## Code

export const CodeExample = styled.code`
  ${typography.mixins.code()};
`;

<Canvas isColumn withSource={SourceState.NONE}>
  <CodeExample>
    {`
    @use '~@liveperson-design-system/tokens/scss/typography';
    \n
    .code {
      @include typography.code;
    }
    `}
  </CodeExample>
</Canvas>

### Mixins

- `code`

## Charts

<Canvas isColumn withSource={SourceState.NONE}>
  <TypographyPreview
    items={[
      ...['Title', 'AxisTitle', 'AxisLabel', 'NumberTitle', 'Number'].map(name => ({
        name: titleCase(name),
        example: styled.p`
          ${commonPStyles};
          ${typography.mixins[`chart${name}`]()};
        `,
      })),
      {
        name: 'Number Big',
        example: styled.p`
          ${commonPStyles};
          ${typography.mixins.chartNumber(true)};
        `,
      },
    ]}
  />
</Canvas>

### Mixins

- `chart-title`
- `chart-axis-title`
- `chart-axis-label`
- `chart-number-title`
- `chart-number($big: false)`
  - `$big` - to switch between font sizes, `$font-size-heading-1` or `$font-size-heading-3`

## CSS helpers classes

### Fonts

To apply `font-family` style just add `lpds-typography-font-{roboto|roboto-mono|roboto-condensed}` class to the element.

### Sizes

To apply `font-size` style just add `lpds-typography-size-{default|body|small|large}` class to the element.

### Line heights

To apply `line-height` style just add `lpds-typography-line-height-{small|medium|large}` class to the element.

### Weights

To apply `font-weight` style just add `lpds-typography-weight-{light|regular|medium|bold}` class to the element.

### Letter spacings

To apply `letter-spacing` style just add `lpds-typography-letter-spacing-{regular|all-caps|compact}` class to the element.

### Headers

To apply `font-size` style for headers just add `lpds-typography-heading-{1|2|3|4|5|6}` class to the element.

### Styles for elements

#### Headers

To apply head styles use `lpds-typography-head-{1|2|3|4|5|6}` class.

#### Body

To apply body text styles use `lpds-typography-body` class.

Also, you can use a few variations
- `lpds-typography-body-small`
- `lpds-typography-body-{bold|italic}`
- `lpds-typography-body-{bold|italic}-small`

#### Button

To apply button styles use `lpds-typography-button` class.

Also, you can use size variations `lpds-typography-button-{small|medium|large}`

#### Tag

To apply tag styles use `lpds-typography-tag` class.

#### Table

To apply table header styles use `lpds-typography-table-header` class and `lpds-typography-table-cell` for table cell styles.

#### Input

To apply input label styles use `lpds-typography-input-label` class and `lpds-typography-input-value` for input value styles.

#### Code

To apply code text styles use `lpds-typography-code` class.

#### Chat

- `lpds-typography-chart-title` - chart title styles
- `lpds-typography-chart-axis-title` - chart axis title styles
- `lpds-typography-chart-axis-label` - chart axis label styles
- `lpds-typography-chart-number` - chart number styles
- `lpds-typography-chart-number-big` - chart big number styles
- `lpds-typography-chart-number-title` - chart number title styles
