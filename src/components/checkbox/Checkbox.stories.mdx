import { Meta, Story, Canvas, ArgsTable, SourceState } from '@storybook/addon-docs';

import Controlled from './Controlled';
import Checkbox from './Checkbox';
import './';

<Meta
  title="Components/Inputs/Checkbox"
  component={Checkbox}
  args={{
    theme: 'dark',
    label: 'Checkbox',
    labelPosition: 'right',
    error: false,
    checked: undefined,
    indeterminate: false,
    disabled: false,
    readOnly: false,
  }}
  argTypes={{
    theme: {
      control: { type: 'inline-radio' },
    },
    label: {},
    labelPosition: {
      control: { type: 'inline-radio' },
    },
    error: {},
    checked: {
      control: { type: 'boolean' },
    },
  }}
  parameters={{
    actions: {
      handles: ['change'],
    },
  }}
/>

# Checkbox

<ArgsTable of={Checkbox} />

**Note:** Those attributes extend [HTMLInputElement](https://www.w3schools.com/tags/tag_input.asp) attributes

## Basic

export const Template = ({
  theme,
  label,
  labelPosition,
  error,
  checked,
  indeterminate,
  disabled,
  readOnly,
}) => (
  <lp-checkbox
    theme={theme === 'dark' ? undefined : theme}
    label={label}
    labelPosition={labelPosition === 'right' ? undefined : labelPosition}
    error={error === false ? undefined : error}
    checked={checked}
    indeterminate={indeterminate === false ? undefined : indeterminate}
    disabled={disabled === false ? undefined : disabled}
    readOnly={readOnly === false ? undefined : readOnly}
  />
);

<Canvas>
  <Story name="Basic">
    {Template.bind({})}
  </Story>
</Canvas>

## Controlled

<Canvas withSource={SourceState.NONE}>
  <Story
    name="Controlled"
    args={{ label: 'Checked', checked: true }}
    parameters={{
      controls: { disable: true },
      actions: { disable: true },
    }}
  >
    {Controlled.bind({})}
  </Story>
</Canvas>

```jsx
import React, { useCallback, useLayoutEffect, useRef, useState } from 'react';

import 'liveperson-design-system/components/checkbox';

const Checkbox = ({ ...props }) => {
  const checkboxRef = useRef(null);

  const [checked, setChecked] = useState(false);

  const checkboxChangeHandler = useCallback(e => {
    setChecked(e.detail.checked);
  }, []);

  useLayoutEffect(() => {
    checkboxRef.current.addEventListener('change', checkboxChangeHandler);

    return () => {
      checkboxRef.current.removeEventListener('change', checkboxChangeHandler);
    };
  }, [checkboxChangeHandler]);

  return <lp-checkbox {...props} ref={checkboxRef} checked={checked} />;
};

export default Checkbox
```

## Indeterminate

<Canvas withSource={SourceState.OPEN}>
  <Story
    name="Indeterminate"
    args={{ label: 'Indeterminate', indeterminate: true }}
    parameters={{
      controls: { disable: true },
      actions: { disable: true },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
